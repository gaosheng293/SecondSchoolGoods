{"version":3,"file":"list.js","sources":["pages/address/list.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy9saXN0LnZ1ZQ"],"sourcesContent":["<!-- pages/address/list.vue -->\r\n<template>\r\n  <view class=\"address-page\">\r\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\r\n\r\n    <view class=\"list\">\r\n      <view v-for=\"item in addressList\" :key=\"item.id\" class=\"address-item\">\r\n        <view class=\"info\">\r\n          <text class=\"name\">{{ item.name }}  {{ item.phone }}</text>\r\n          <text class=\"addr\">{{ item.address }}</text>\r\n        </view>\r\n        <view class=\"actions\">\r\n          <text class=\"default\" v-if=\"item.isDefault\">默认</text>\r\n          <uni-icons type=\"compose\" size=\"20\" color=\"#666\" @click=\"toEdit(item.id)\" />\r\n          <uni-icons type=\"trash\" size=\"20\" color=\"#ff4757\" @click=\"deleteAddr(item.id)\" />\r\n        </view>\r\n        <view class=\"set-default\" @click=\"setDefault(item.id)\" v-if=\"!item.isDefault\">设为默认</view>\r\n      </view>\r\n\r\n      <view class=\"empty\" v-if=\"!addressList.length\">\r\n        <image src=\"/static/empty.png\" class=\"empty-img\" mode=\"widthFix\" />\r\n        <text class=\"empty-text\">暂无收货地址</text>\r\n      </view>\r\n    </view>\r\n\r\n    <button class=\"add-btn\" @click=\"toAdd\">添加新地址</button>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      statusBarHeight: 0,\r\n      addressList: []\r\n    }\r\n  },\r\n\r\n  onLoad() {\r\n    this.statusBarHeight = uni.getSystemInfoSync().statusBarHeight\r\n    this.loadList()\r\n  },\r\n\r\n  onShow() {\r\n    this.loadList()  // 从编辑返回刷新\r\n  },\r\n\r\n  methods: {\r\n    loadList() {\r\n      const token = uni.getStorageSync('token')\r\n      if (!token) return uni.showToast({ title: '请登录', icon: 'none' })\r\n\r\n      uni.request({\r\n        url: 'http://192.168.0.105:8080/api/address/list',\r\n        header: { Authorization: 'Bearer ' + token },\r\n        success: (res) => {\r\n          if (res.statusCode === 200 && res.data?.list) {\r\n            this.addressList = res.data.list\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    toAdd() {\r\n      uni.navigateTo({ url: '/pages/address/edit' })\r\n    },\r\n\r\n    toEdit(id) {\r\n      uni.navigateTo({ url: `/pages/address/edit?id=${id}` })\r\n    },\r\n\r\n    deleteAddr(id) {\r\n      uni.showModal({\r\n        title: '确认删除？',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            const token = uni.getStorageSync('token')\r\n            uni.request({\r\n              url: `http://192.168.0.105:8080/api/address/${id}`,\r\n              method: 'DELETE',\r\n              header: { Authorization: 'Bearer ' + token },\r\n              success: () => {\r\n                uni.showToast({ title: '删除成功' })\r\n                this.loadList()\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    setDefault(id) {\r\n      const token = uni.getStorageSync('token')\r\n      uni.request({\r\n        url: `http://192.168.0.105:8080/api/address/default/${id}`,\r\n        method: 'PUT',\r\n        header: { Authorization: 'Bearer ' + token },\r\n        success: () => {\r\n          uni.showToast({ title: '设为默认成功' })\r\n          this.loadList()\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.address-page { background: #f8f8f8; min-height: 100vh; padding-bottom: 140rpx; }\r\n.list { padding: 20rpx; }\r\n.address-item { background: #fff; border-radius: 20rpx; padding: 32rpx; margin-bottom: 24rpx; position: relative; }\r\n.info .name { font-size: 32rpx; color: #333; font-weight: bold; }\r\n.info .addr { font-size: 28rpx; color: #666; margin-top: 12rpx; display: block; }\r\n.actions { position: absolute; top: 32rpx; right: 32rpx; display: flex; gap: 32rpx; align-items: center; }\r\n.default { background: #ff4757; color: #fff; padding: 4rpx 12rpx; border-radius: 8rpx; font-size: 24rpx; }\r\n.set-default { position: absolute; bottom: 32rpx; right: 32rpx; color: #007AFF; font-size: 28rpx; }\r\n.empty { text-align: center; padding-top: 200rpx; color: #999; }\r\n.empty-img { width: 360rpx; }\r\n.empty-text { display: block; margin-top: 40rpx; font-size: 30rpx; }\r\n.add-btn { position: fixed; bottom: 40rpx; left: 32rpx; right: 32rpx; background: #ff4757; color: #fff; height: 88rpx; line-height: 88rpx; border-radius: 88rpx; font-size: 32rpx; }\r\n</style>","import MiniProgramPage from 'E:/code/wechatDOC/HbUniapp/demoxiaoyuan/pages/address/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AA8BA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,aAAa,CAAC;AAAA,IAChB;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,kBAAkBA,oBAAI,kBAAmB,EAAC;AAC/C,SAAK,SAAS;AAAA,EACf;AAAA,EAED,SAAS;AACP,SAAK;EACN;AAAA,EAED,SAAS;AAAA,IACP,WAAW;AACT,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,CAAC;AAAO,eAAOA,cAAAA,MAAI,UAAU,EAAE,OAAO,OAAO,MAAM,QAAQ;AAE/DA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK;AAAA,QACL,QAAQ,EAAE,eAAe,YAAY,MAAO;AAAA,QAC5C,SAAS,CAAC,QAAQ;;AAChB,cAAI,IAAI,eAAe,SAAO,SAAI,SAAJ,mBAAU,OAAM;AAC5C,iBAAK,cAAc,IAAI,KAAK;AAAA,UAC9B;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA,IAED,QAAQ;AACNA,oBAAAA,MAAI,WAAW,EAAE,KAAK,uBAAuB;AAAA,IAC9C;AAAA,IAED,OAAO,IAAI;AACTA,oBAAG,MAAC,WAAW,EAAE,KAAK,0BAA0B,EAAE,IAAI;AAAA,IACvD;AAAA,IAED,WAAW,IAAI;AACbA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,kBAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxCA,0BAAAA,MAAI,QAAQ;AAAA,cACV,KAAK,yCAAyC,EAAE;AAAA,cAChD,QAAQ;AAAA,cACR,QAAQ,EAAE,eAAe,YAAY,MAAO;AAAA,cAC5C,SAAS,MAAM;AACbA,8BAAAA,MAAI,UAAU,EAAE,OAAO,OAAK,CAAG;AAC/B,qBAAK,SAAS;AAAA,cAChB;AAAA,aACD;AAAA,UACH;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA,IAED,WAAW,IAAI;AACb,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxCA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK,iDAAiD,EAAE;AAAA,QACxD,QAAQ;AAAA,QACR,QAAQ,EAAE,eAAe,YAAY,MAAO;AAAA,QAC5C,SAAS,MAAM;AACbA,wBAAAA,MAAI,UAAU,EAAE,OAAO,SAAO,CAAG;AACjC,eAAK,SAAS;AAAA,QAChB;AAAA,OACD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGA,GAAG,WAAW,eAAe;"}